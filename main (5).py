n = int(input())

m = int(input())

advert = []

for i in range (n):
    
for j in range (m):
        
input(advert)


pixel = '.'

p = []

for i in range (n):
    
for j in range (m):
        
p = int(input())
        
if p > 3:
            
pixel += 'R'
        
if p % 2 == 1:
            
pixel += 'B'
        
if p == 2 or p == 3 or p == 6 or p ==7:
            
pixel += 'G'
        
if p [i][j] == advert [i][j]:
            
print ('YES')
        
else:
            
print ('NO')